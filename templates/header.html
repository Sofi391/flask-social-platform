<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no" />
    <meta name="description" content="" />
    <meta name="author" content="" />
    <title>Clean Blog</title>
    <link rel="icon" type="image/x-icon" href="{{url_for('static', filename='assets/fav.png')}}" />
    <!-- Font Awesome icons (free version)-->
    <script src="https://use.fontawesome.com/releases/v6.3.0/js/all.js" crossorigin="anonymous"></script>
    <!-- Google fonts-->
    <link href="https://fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic" rel="stylesheet" type="text/css" />
    <link href="https://fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800" rel="stylesheet" type="text/css" />
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.1/font/bootstrap-icons.css" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.2/dist/js/bootstrap.bundle.min.js" integrity="sha384-ENjdO4Dr2bkBIFxQpeoWc5p0nU6U5r9IYbZl+PBqytzVjv1pG5dzNQ+u5PaXtkK" crossorigin="anonymous"></script>

    <!-- Core theme CSS (includes Bootstrap)-->
    <link href="{{url_for('static', filename='css/styles.css')}}" rel="stylesheet" />
    <link rel="stylesheet" href="{{ url_for('static', filename='css/a.css') }}">
    <link rel="stylesheet" href="{{ url_for('static', filename='css/post.css') }}">

    <style>
      /* Shrink mobile search button */
      .mobile-search-btn {
        padding: 0.25rem 0.4rem;
        font-size: 0.9rem;
      }

      /* Enhanced button styles */
      .nav-btn-primary {
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border: none;
        color: white;
        transition: all 0.3s ease;
        border-radius: 25px;
        padding: 0.5rem 1.5rem;
        font-weight: 500;
      }

      .nav-btn-primary:hover {
        transform: translateY(-2px);
        box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
        background: linear-gradient(135deg, #764ba2 0%, #667eea 100%);
      }

      .nav-btn-outline {
        border: 2px solid #667eea;
        color: #667eea;
        background: transparent;
        transition: all 0.3s ease;
        border-radius: 25px;
        padding: 0.5rem 1.5rem;
        font-weight: 500;
      }

      .nav-btn-outline:hover {
        background: #667eea;
        color: white;
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(102, 126, 234, 0.3);
      }

      /* Enhanced search bar */
      .search-container {
        position: relative;
        max-width: 400px;
      }

      .search-input {
        border-radius: 25px;
        border: 2px solid #e9ecef;
        padding: 0.75rem 1.5rem;
        transition: all 0.3s ease;
        background: #f8f9fa;
      }

      .search-input:focus {
        border-color: #667eea;
        box-shadow: 0 0 0 0.2rem rgba(102, 126, 234, 0.25);
        background: white;
      }

      .search-btn {
        border-radius: 25px;
        padding: 0.75rem 1.5rem;
        background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
        border: none;
        color: white;
        transition: all 0.3s ease;
        font-weight: 500;
      }

      .search-btn:hover {
        transform: translateY(-2px);
        box-shadow: 0 6px 20px rgba(102, 126, 234, 0.4);
      }

      /* Enhanced navbar toggler */
      .navbar-toggler-custom {
        border: 2px solid #667eea;
        border-radius: 10px;
        padding: 0.5rem 0.75rem;
        transition: all 0.3s ease;
        background: transparent;
      }

      .navbar-toggler-custom:hover {
        background: #667eea;
        transform: translateY(-2px);
        box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
      }

      .navbar-toggler-custom .navbar-toggler-icon {
        background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='%23667eea' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
      }

      .navbar-toggler-custom:hover .navbar-toggler-icon {
        background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' viewBox='0 0 30 30'%3e%3cpath stroke='%23ffffff' stroke-linecap='round' stroke-miterlimit='10' stroke-width='2' d='M4 7h22M4 15h22M4 23h22'/%3e%3c/svg%3e");
      }

      /* Enhanced notification button */
      .notification-btn {
        position: relative;
        transition: all 0.3s cubic-bezier(0.4, 0, 0.2, 1);
        border-radius: 12px;
        padding: 0.5rem;
        background: transparent;
        border: none;
      }

      .notification-btn:hover {
        transform: translateY(-2px) scale(1.05);
        background: rgba(102, 126, 234, 0.1);
      }

      .notification-btn:active {
        transform: translateY(0) scale(0.95);
      }

      .notification-btn .fa-bell {
        transition: all 0.3s ease;
        color: #667eea;
      }

      .notification-btn:hover .fa-bell {
        color: #764ba2;
        transform: rotate(15deg);
      }

      .notification-pulse {
        animation: pulse 2s infinite;
      }

      @keyframes pulse {
        0% {
          box-shadow: 0 0 0 0 rgba(220, 53, 69, 0.7);
        }
        70% {
          box-shadow: 0 0 0 6px rgba(220, 53, 69, 0);
        }
        100% {
          box-shadow: 0 0 0 0 rgba(220, 53, 69, 0);
        }
      }

      /* Smooth navigation link hover effects */
      .nav-link-smooth {
        position: relative;
        transition: all 0.3s ease;
        border-radius: 6px;
        font-weight: 500;
      }

      .nav-link-smooth::before {
        content: '';
        position: absolute;
        bottom: 0;
        left: 50%;
        width: 0;
        height: 2px;
        background: linear-gradient(135deg, #667eea, #764ba2);
        transition: all 0.3s ease;
        transform: translateX(-50%);
      }

      .nav-link-smooth:hover {
        color: #667eea !important;
        transform: translateY(-1px);
      }

      .nav-link-smooth:hover::before {
        width: 80%;
      }

      .nav-link-smooth.active {
        color: #667eea !important;
      }

      .nav-link-smooth.active::before {
        width: 80%;
      }
    </style>
</head>

<!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-light" id="mainNav">
  <div class="container px-4 px-lg-5 d-flex flex-wrap flex-lg-nowrap align-items-center justify-content-between">

      {% if home and current_user.is_authenticated %}
        <!-- Enhanced Profile Sidebar Button -->
        <button class="profile-sidebar-trigger"
                type="button"
                data-bs-toggle="offcanvas"
                data-bs-target="#profileSidebar"
                aria-controls="profileSidebar"
                style="
                    position: fixed;
                    top: 20px;
                    left: 20px;
                    width: 52px;
                    height: 52px;
                    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
                    border: none;
                    border-radius: 14px;
                    color: white;
                    font-size: 24px;
                    font-weight: 300;
                    cursor: pointer;
                    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
                    box-shadow: 0 6px 25px rgba(102, 126, 234, 0.4);
                    z-index: 1040;
                    display: flex;
                    align-items: center;
                    justify-content: center;
                    overflow: hidden;
                    font-family: 'Segoe UI', system-ui, sans-serif;
                "
                onmouseover="this.style.transform='translateY(-2px) rotate(90deg)'; this.style.boxShadow='0 12px 35px rgba(102, 126, 234, 0.6)'"
                onmouseout="this.style.transform='translateY(0px) rotate(0deg)'; this.style.boxShadow='0 6px 25px rgba(102, 126, 234, 0.4)'"
                onmousedown="this.style.transform='translateY(0px) scale(0.95)'"
                onmouseup="this.style.transform='translateY(-2px) scale(1)'">

            <!-- Modern three lines icon -->
            <span style="
                display: flex;
                flex-direction: column;
                gap: 4px;
                transition: all 0.3s ease;
            ">
                <span style="
                    width: 20px;
                    height: 2px;
                    background: white;
                    border-radius: 2px;
                    transition: all 0.3s ease;
                "></span>
                <span style="
                    width: 16px;
                    height: 2px;
                    background: white;
                    border-radius: 2px;
                    transition: all 0.3s ease;
                    margin-left: auto;
                "></span>
                <span style="
                    width: 12px;
                    height: 2px;
                    background: white;
                    border-radius: 2px;
                    transition: all 0.3s ease;
                    margin-left: auto;
                "></span>
            </span>

            <!-- Animated background overlay -->
            <span style="
                position: absolute;
                top: 0;
                left: -100%;
                width: 100%;
                height: 100%;
                background: linear-gradient(90deg, transparent, rgba(255, 255, 255, 0.3), transparent);
                transition: left 0.6s ease;
            "></span>
        </button>

        <style>
        /* Mobile responsiveness */
        @media (max-width: 768px) {
            .profile-sidebar-trigger {
                top: 15px !important;
                left: 15px !important;
                width: 44px !important;
                height: 44px !important;
                border-radius: 12px !important;
                box-shadow: 0 4px 15px rgba(102, 126, 234, 0.4) !important;
            }

            .profile-sidebar-trigger span {
                gap: 3px !important;
            }

            .profile-sidebar-trigger span > span {
                width: 16px !important;
                height: 1.8px !important;
            }

            .profile-sidebar-trigger span > span:nth-child(2) {
                width: 13px !important;
            }

            .profile-sidebar-trigger span > span:nth-child(3) {
                width: 10px !important;
            }

            /* Adjust hover effects for mobile */
            .profile-sidebar-trigger:hover {
                transform: translateY(-1px) rotate(45deg) !important;
                box-shadow: 0 6px 20px rgba(102, 126, 234, 0.5) !important;
            }
        }

        /* Extra small devices */
        @media (max-width: 480px) {
            .profile-sidebar-trigger {
                top: 12px !important;
                left: 12px !important;
                width: 40px !important;
                height: 40px !important;
                border-radius: 10px !important;
            }

            .profile-sidebar-trigger span > span {
                width: 14px !important;
                height: 1.5px !important;
            }

            .profile-sidebar-trigger span > span:nth-child(2) {
                width: 11px !important;
            }

            .profile-sidebar-trigger span > span:nth-child(3) {
                width: 8px !important;
            }
        }
        </style>

        <script>
        // Add interactive animation for the three lines
        document.addEventListener('DOMContentLoaded', function() {
            const trigger = document.querySelector('.profile-sidebar-trigger');
            if (trigger) {
                trigger.addEventListener('mouseenter', function() {
                    const lines = this.querySelectorAll('span > span');
                    lines[0].style.width = '16px';
                    lines[1].style.width = '20px';
                    lines[2].style.width = '16px';
                    lines[0].style.marginLeft = 'auto';
                    lines[1].style.marginLeft = '0';
                    lines[2].style.marginLeft = 'auto';
                });

                trigger.addEventListener('mouseleave', function() {
                    const lines = this.querySelectorAll('span > span');
                    // Use mobile-appropriate sizes
                    const isMobile = window.innerWidth <= 768;
                    if (isMobile) {
                        lines[0].style.width = '14px';
                        lines[1].style.width = '11px';
                        lines[2].style.width = '8px';
                    } else {
                        lines[0].style.width = '20px';
                        lines[1].style.width = '16px';
                        lines[2].style.width = '12px';
                    }
                    lines[0].style.marginLeft = '0';
                    lines[1].style.marginLeft = 'auto';
                    lines[2].style.marginLeft = 'auto';
                });

                trigger.addEventListener('click', function() {
                    const overlay = this.querySelector('span:last-child');
                    overlay.style.left = '100%';
                    setTimeout(() => {
                        overlay.style.left = '-100%';
                    }, 600);
                });

                // Touch device optimizations
                if ('ontouchstart' in window) {
                    trigger.style.cursor = 'pointer';
                    // Remove hover effects for touch devices
                    trigger.removeAttribute('onmouseover');
                    trigger.removeAttribute('onmouseout');
                    trigger.removeAttribute('onmousedown');
                    trigger.removeAttribute('onmouseup');

                    // Add touch-specific interactions
                    trigger.addEventListener('touchstart', function() {
                        this.style.transform = 'scale(0.95)';
                    });

                    trigger.addEventListener('touchend', function() {
                        this.style.transform = 'scale(1)';
                    });
                }
            }
        });
        </script>
        {% endif %}
    <a class="navbar-brand me-auto ms-2 px-5 fw-bold" href="/" style="font-size: 1.8rem; background: linear-gradient(135deg, #667eea, #764ba2); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">MySite</a>

    {% if home %}
    <div class="d-flex flex-column flex-md-row align-items-start align-items-md-center mx-auto">

      <!-- Mobile Search Icon -->
      <button class="btn nav-btn-outline mobile-search-btn d-lg-none mb-2 mb-md-0 me-2" type="button" data-bs-toggle="collapse" data-bs-target="#mobileSearch" aria-expanded="false" aria-controls="mobileSearch">
        <i class="fas fa-search"></i>
      </button>

      <!-- Search Form for Desktop -->
      <form class="d-none d-lg-flex mb-2 mb-md-0 me-md-3 search-container" action="{{ url_for('search') }}" method="get" style="max-width: 400px;">
        <div class="input-group">
          <input
            class="form-control search-input me-2"
            type="search"
            name="q"
            placeholder="Search posts, articles, and more..."
            aria-label="Search"
          >
          <button class="btn search-btn" type="submit">
            <i class="fas fa-search me-1"></i> Search
          </button>
        </div>
      </form>

      <!-- Collapsible Mobile Search Form -->
      <div class="collapse d-lg-none mb-2 mb-md-0 w-100" id="mobileSearch">
        <form class="d-flex w-100 search-container" action="{{ url_for('search') }}" method="get">
          <div class="input-group">
            <input
              class="form-control search-input me-2"
              type="search"
              name="q"
              placeholder="Search posts, articles, and more..."
              aria-label="Search"
            >
            <button class="btn search-btn" type="submit">
              <i class="fas fa-search"></i>
            </button>
          </div>
        </form>
      </div>

      {% if current_user.is_authenticated %}
      <!-- Enhanced Notifications Icon -->
      <ul class="navbar-nav mb-2 mb-md-0">
        <li class="nav-item">
          <a class="nav-link position-relative px-3 notification-btn" href="{{ url_for('notifications') }}">
            <i class="fas fa-bell fa-lg"></i>
            {% if unread_count > 0 %}
            <span class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger notification-pulse" style="font-size: 0.6rem; min-width: 18px; height: 18px; display: flex; align-items: center; justify-content: center;">
              {{ unread_count }}
              <span class="visually-hidden">unread notifications</span>
            </span>
            {% endif %}
          </a>
        </li>
      </ul>
      {% endif %}
    </div>
    {% endif %}

    <!-- Navbar Toggler -->
    <button class="navbar-toggler navbar-toggler-custom" type="button" data-bs-toggle="collapse"
      data-bs-target="#navbarResponsive" aria-controls="navbarResponsive"
      aria-expanded="false" aria-label="Toggle navigation">
      <i class="fas fa-bars"></i>
    </button>

    <!-- Navbar Links (Right-most side) -->
    <div class="collapse navbar-collapse justify-content-end" id="navbarResponsive">
      <ul class="navbar-nav py-4 py-lg-0">
        <li class="nav-item">
          <a class="nav-link px-lg-3 py-3 py-lg-4 nav-link-smooth" href="{{ url_for('home') }}">Home</a>
        </li>
        {% if not current_user.is_authenticated %}
        <li class="nav-item">
          <a class="nav-link px-lg-3 py-3 py-lg-4 nav-link-smooth" href="{{ url_for('login') }}">Login</a>
        </li>
        <li class="nav-item">
          <a class="nav-link px-lg-3 py-3 py-lg-4 nav-link-smooth" href="{{ url_for('register') }}">Register</a>
        </li>
        {% endif %}
        <li class="nav-item">
          <a class="nav-link px-lg-3 py-3 py-lg-4 nav-link-smooth" href="{{ url_for('about') }}">About</a>
        </li>
        <li class="nav-item">
          <a class="nav-link px-lg-3 py-3 py-lg-4 nav-link-smooth" href="{{ url_for('contact') }}">Contact</a>
        </li>
      </ul>
    </div>

  </div>
</nav>

{% if current_user.is_authenticated %}
<div class="offcanvas offcanvas-start text-white" tabindex="-1" id="profileSidebar" aria-labelledby="profileSidebarLabel" style="
    background: linear-gradient(-45deg, #0a192f, #1c1c1c, #2b2d42, #003638, #121212);
    background-size: 400% 400%;
    animation: gradientShift 8s ease infinite;
    box-shadow: 8px 0 30px rgba(0, 0, 0, 0.4);
">
  <div class="offcanvas-header border-bottom border-secondary" style="
      border-color: rgba(255, 255, 255, 0.15) !important;
      padding: 1.5rem 1.5rem 1rem;
  ">
    <h5 class="offcanvas-title fw-bold" id="profileSidebarLabel" style="
        font-size: 1.4rem;
        letter-spacing: 0.5px;
        background: linear-gradient(45deg, #fff, #e3f2fd);
        -webkit-background-clip: text;
        -webkit-text-fill-color: transparent;
        background-clip: text;
    ">Profile Menu</h5>
    <button type="button" class="btn-close btn-close-white" data-bs-dismiss="offcanvas" aria-label="Close" style="
        filter: brightness(0.8);
        transition: all 0.3s ease;
    " onmouseover="this.style.transform='scale(1.2)'; this.style.filter='brightness(1.5)'"
    onmouseout="this.style.transform='scale(1)'; this.style.filter='brightness(0.8)'"></button>
  </div>

  <div class="offcanvas-body" style="
      padding: 1.5rem;
      background: linear-gradient(-45deg, #0a192f, #1c1c1c, #2b2d42, #003638, #121212);
      background-size: 400% 400%;
      animation: gradientShift 8s ease infinite;
  ">
    <div class="profile-info text-center mb-4" style="
        padding: 1.5rem 1rem;
        background: rgba(255, 255, 255, 0.08);
        border-radius: 16px;
        backdrop-filter: blur(10px);
        border: 1px solid rgba(255, 255, 255, 0.15);
        margin-bottom: 2rem !important;
    ">
      <img src="{{ current_user.email | gravatar }}" class="rounded-circle mb-3 profile-pic" width="90" height="90" alt="profile picture" style="
          border: 3px solid rgba(255, 255, 255, 0.25);
          box-shadow: 0 4px 20px rgba(0, 0, 0, 0.3);
          transition: all 0.3s ease;
      " onmouseover="this.style.transform='scale(1.1)'; this.style.borderColor='rgba(255, 255, 255, 0.5)'"
      onmouseout="this.style.transform='scale(1)'; this.style.borderColor='rgba(255, 255, 255, 0.25)'">
      <h6 class="fw-semibold mb-1 text-light" style="
          font-size: 1.1rem;
          margin-bottom: 0.25rem !important;
      ">{{ current_user.name }}</h6>
      <p class="text-muted small" style="
          color: rgba(255, 255, 255, 0.6) !important;
          font-size: 0.85rem;
          margin-bottom: 0 !important;
      ">{{ current_user.email }}</p>
    </div>

    <ul class="list-unstyled profile-links" style="margin: 0;">
      <li style="margin-bottom: 0.5rem;">
        <a href="{{ url_for('my_posts', user_id=current_user.id) }}" class="nav-link link-modern" style="
            display: flex;
            align-items: center;
            padding: 0.9rem 1.2rem;
            color: rgba(255, 255, 255, 0.85);
            text-decoration: none;
            border-radius: 12px;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.07);
            border: 1px solid rgba(255, 255, 255, 0.12);
            font-weight: 500;
        " onmouseover="this.style.background='rgba(255, 255, 255, 0.15)'; this.style.transform='translateX(8px)'; this.style.color='white'"
        onmouseout="this.style.background='rgba(255, 255, 255, 0.07)'; this.style.transform='translateX(0)'; this.style.color='rgba(255, 255, 255, 0.85)'">
          <i class="bi bi-eye-fill me-3" style="font-size: 1.1rem;"></i>
          <span>My Posts</span>
        </a>
      </li>

      <li style="margin-bottom: 0.5rem;">
        <a href="{{ url_for('new_post') }}" class="nav-link link-modern" style="
            display: flex;
            align-items: center;
            padding: 0.9rem 1.2rem;
            color: rgba(255, 255, 255, 0.85);
            text-decoration: none;
            border-radius: 12px;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.07);
            border: 1px solid rgba(255, 255, 255, 0.12);
            font-weight: 500;
        " onmouseover="this.style.background='rgba(255, 255, 255, 0.15)'; this.style.transform='translateX(8px)'; this.style.color='white'"
        onmouseout="this.style.background='rgba(255, 255, 255, 0.07)'; this.style.transform='translateX(0)'; this.style.color='rgba(255, 255, 255, 0.85)'">
          <i class="bi bi-pencil-square me-3" style="font-size: 1.1rem;"></i>
          <span>Create Post</span>
        </a>
      </li>

      <!-- Settings Dropdown -->
      <li class="settings-dropdown" style="margin-bottom: 0.5rem;">
        <a href="#settingsMenu" class="nav-link dropdown-toggle link-modern" data-bs-toggle="collapse" aria-expanded="false" style="
            display: flex;
            align-items: center;
            padding: 0.9rem 1.2rem;
            color: rgba(255, 255, 255, 0.85);
            text-decoration: none;
            border-radius: 12px;
            transition: all 0.3s ease;
            background: rgba(255, 255, 255, 0.07);
            border: 1px solid rgba(255, 255, 255, 0.12);
            font-weight: 500;
            cursor: pointer;
        " onmouseover="this.style.background='rgba(255, 255, 255, 0.15)'; this.style.transform='translateX(8px)'; this.style.color='white'"
        onmouseout="this.style.background='rgba(255, 255, 255, 0.07)'; this.style.transform='translateX(0)'; this.style.color='rgba(255, 255, 255, 0.85)'">
          <i class="bi bi-gear-fill me-3" style="font-size: 1.1rem;"></i>
          <span>Settings</span>
          <i class="bi bi-chevron-down ms-auto" style="font-size: 0.8rem; transition: transform 0.3s ease;"></i>
        </a>
        <ul class="collapse list-unstyled ms-3 dropdown-menu-modern" id="settingsMenu" style="
            margin-top: 0.5rem;
            padding-left: 0;
        ">
          <li style="margin-bottom: 0.3rem;">
            <a href="{{ '#' }}" class="nav-link link-modern" style="
                display: flex;
                align-items: center;
                padding: 0.7rem 1rem;
                color: rgba(255, 255, 255, 0.75);
                text-decoration: none;
                border-radius: 8px;
                transition: all 0.3s ease;
                background: rgba(255, 255, 255, 0.05);
                font-size: 0.9rem;
            " onmouseover="this.style.background='rgba(255, 255, 255, 0.12)'; this.style.color='white'; this.style.transform='translateX(4px)'"
            onmouseout="this.style.background='rgba(255, 255, 255, 0.05)'; this.style.color='rgba(255, 255, 255, 0.75)'; this.style.transform='translateX(0)'">
              <i class="bi bi-person-fill me-2" style="font-size: 0.9rem;"></i>
              <span>Change Profile</span>
            </a>
          </li>
          <li style="margin-bottom: 0.3rem;">
            <a href="{{ url_for('forget_password') }}" class="nav-link link-modern" style="
                display: flex;
                align-items: center;
                padding: 0.7rem 1rem;
                color: rgba(255, 255, 255, 0.75);
                text-decoration: none;
                border-radius: 8px;
                transition: all 0.3s ease;
                background: rgba(255, 255, 255, 0.05);
                font-size: 0.9rem;
            " onmouseover="this.style.background='rgba(255, 255, 255, 0.12)'; this.style.color='white'; this.style.transform='translateX(4px)'"
            onmouseout="this.style.background='rgba(255, 255, 255, 0.05)'; this.style.color='rgba(255, 255, 255, 0.75)'; this.style.transform='translateX(0)'">
              <i class="bi bi-shield-lock-fill me-2" style="font-size: 0.9rem;"></i>
              <span>Change Password</span>
            </a>
          </li>
        </ul>
      </li>

      <li style="margin-top: 1.5rem;">
        <a href="{{ url_for('logout') }}" class="nav-link link-modern" style="
            display: flex;
            align-items: center;
            padding: 0.9rem 1.2rem;
            color: #ff6b6b;
            text-decoration: none;
            border-radius: 12px;
            transition: all 0.3s ease;
            background: rgba(255, 107, 107, 0.15);
            border: 1px solid rgba(255, 107, 107, 0.25);
            font-weight: 500;
        " onmouseover="this.style.background='rgba(255, 107, 107, 0.25)'; this.style.transform='translateX(8px)'; this.style.color='#ff4757'"
        onmouseout="this.style.background='rgba(255, 107, 107, 0.15)'; this.style.transform='translateX(0)'; this.style.color='#ff6b6b'">
          <i class="bi bi-box-arrow-right me-3" style="font-size: 1.1rem;"></i>
          <span>Logout</span>
        </a>
      </li>
    </ul>
  </div>
</div>

<script>
// Add dropdown arrow animation
document.addEventListener('DOMContentLoaded', function() {
    const settingsToggle = document.querySelector('[href="#settingsMenu"]');
    if (settingsToggle) {
        settingsToggle.addEventListener('click', function() {
            const arrow = this.querySelector('.bi-chevron-down');
            if (this.getAttribute('aria-expanded') === 'true') {
                arrow.style.transform = 'rotate(180deg)';
            } else {
                arrow.style.transform = 'rotate(0deg)';
            }
        });
    }
});
</script>

<script>
document.addEventListener("DOMContentLoaded", () => {
  const mainNav = document.getElementById("mainNav");
  if (!mainNav) return;

  let lastScroll = 0;
  let ticking = false;
  const navHeight = mainNav.offsetHeight;

  window.addEventListener("scroll", () => {
    const currentScroll = window.scrollY;

    if (!ticking) {
      window.requestAnimationFrame(() => {
        if (currentScroll <= 0) {
          mainNav.classList.remove("is-fixed", "is-visible");
        } else if (currentScroll > lastScroll && currentScroll > navHeight) {
          // scrolling down
          mainNav.classList.add("is-fixed");
          mainNav.classList.remove("is-visible");
        } else if (currentScroll < lastScroll) {
          // scrolling up
          mainNav.classList.add("is-visible");
        }
        lastScroll = currentScroll;
        ticking = false;
      });
      ticking = true;
    }
  });
});
</script>
<style>
  /* Smooth sticky navbar animation */
#mainNav {
  transition: top 0.3s ease, transform 0.3s ease, opacity 0.3s ease;
}

/* When navbar becomes fixed */
#mainNav.is-fixed {
  position: fixed;
  top: 0;
  width: 100%;
  z-index: 1030;
  background-color: #fff; /* keep your original bg color */
  box-shadow: 0 2px 6px rgba(0,0,0,0.1);
  opacity: 0.98;
  transform: translateY(-100%);
}

/* When visible after scroll-up */
#mainNav.is-fixed.is-visible {
  transform: translateY(0);
}
</style>


{% endif %}