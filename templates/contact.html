<!DOCTYPE html>
<html lang="en">
    {% include "header.html" %}
    <body>
        <!-- Page Header -->
        <header class="masthead m-0" style="background-image: linear-gradient(rgba(0,0,0,0.5), rgba(0,0,0,0.5)), url('{{ url_for('static', filename='assets/img/contact-bg.jpg') }}'); background-size: cover; background-position: center;">
            <div class="container position-relative px-4 px-lg-5">
                <div class="row gx-4 gx-lg-5 justify-content-center">
                    <div class="col-md-10 col-lg-8 col-xl-7 text-center">
                        <div class="page-heading text-white">
                            <h1 class="display-4 fw-bold animate__animated animate__fadeInDown">Contact Me</h1>
                            <span class="subheading fs-5 animate__animated animate__fadeInUp animate__delay-1s">Have questions? I have answers.</span>
                        </div>
                    </div>
                </div>
            </div>
        </header>

        <!-- Main Content -->
        <main class="mb-0 my_background py-5" style="background-color: #f0f2f5;">
            <div class="container px-4 px-lg-5">
                <div class="row gx-4 gx-lg-5 justify-content-center">
                    <div class="col-md-10 col-lg-8 col-xl-7">

                        {% if msg_sent %}
                        <!-- Success Message Card -->
                        <div class="animate__animated animate__fadeInUp animate__faster">
                            <div class="card border-0 rounded-4 shadow-lg p-4 text-center" style="background-color: #d4edda;">
                                <div class="card-body">
                                    <i class="fas fa-check-circle text-success display-1 mb-3 animate__animated animate__bounceIn"></i>
                                    <h2 class="card-title mb-3 fw-bold">Thank You, {{ request.form.username }}!</h2>
                                    <p class="card-text lead mb-4">Your message has been successfully sent. I will get back to you as soon as possible.</p>
                                    <a href="{{ url_for('contact') }}" class="btn btn-gradient btn-lg rounded-pill shadow btn-hover">Send Another Message</a>
                                </div>
                            </div>
                        </div>
                        {% else %}
                        <!-- Contact Form -->
                        <div class="card border-0 rounded-4 shadow p-5 animate__animated animate__fadeInUp" style="background: rgba(255,255,255,0.95);">
                            <div class="card-body">
                                <p class="mb-4 fs-5 text-center">Want to get in touch? Fill out the form below and I will respond as soon as possible!</p>
                                <form action="{{url_for('contact')}}" method="post" id="contactForm" data-sb-form-api-token="API_TOKEN">
                                    <div class="form-floating mb-3">
                                        <input class="form-control shadow-sm rounded-3" id="name" type="text" name="username" placeholder="Enter your name..." data-sb-validations="required" value="{{username if username else ''}}" />
                                        <label for="name">Name</label>
                                        <div class="invalid-feedback" data-sb-feedback="name:required">A name is required.</div>
                                    </div>
                                    <div class="form-floating mb-3">
                                        <input class="form-control shadow-sm rounded-3" id="email" type="email" name="email" placeholder="Enter your email..." required data-sb-validations="required,email" value="{{email if email else ''}}" />
                                        <label for="email">Email address</label>
                                        <div class="invalid-feedback" data-sb-feedback="email:required">An email is required.</div>
                                        <div class="invalid-feedback" data-sb-feedback="email:email">Email is not valid.</div>
                                    </div>
                                    <div class="form-floating mb-3">
                                        <input class="form-control shadow-sm rounded-3" id="phone" type="tel" name="phone" placeholder="Enter your phone number..." required data-sb-validations="required" />
                                        <label for="phone">Phone Number</label>
                                        <div class="invalid-feedback" data-sb-feedback="phone:required">A phone number is required.</div>
                                    </div>
                                    <div class="form-floating mb-3">
                                        <textarea class="form-control shadow-sm rounded-3" id="message" name="message" placeholder="Enter your message here..." style="height: 12rem" data-sb-validations="required">{{ message if message else '' }}</textarea>
                                        <label for="message">Message</label>
                                        <div class="invalid-feedback" data-sb-feedback="message:required">A message is required.</div>
                                    </div>
                                    <div class="d-none" id="submitErrorMessage">
                                        <div class="text-center text-danger mb-3">Error sending message!</div>
                                    </div>
                                    <button class="btn btn-gradient btn-lg w-100 rounded-pill shadow btn-hover text-uppercase" id="submitButton" type="submit">Send Message</button>
                                </form>
                            </div>
                        </div>
                        {% endif %}

                    </div>
                </div>
            </div>
        </main>

        <!-- Footer -->
        {% include "footer.html" %}

        <!-- Custom CSS -->
        <style>
            /* Gradient Buttons */
            .btn-gradient {
                background: linear-gradient(90deg, #4ade80, #16a34a);
                color: white;
                transition: all 0.3s ease;
                box-shadow: 0 4px 15px rgba(0,0,0,0.1);
            }
            .btn-gradient:hover {
                transform: translateY(-2px);
                box-shadow: 0 6px 20px rgba(0,0,0,0.15);
            }
            /* Form inputs focus effect */
            .form-control:focus {
                border-color: #16a34a;
                box-shadow: 0 0 0 0.2rem rgba(22,163,74,0.25);
            }
        </style>

        <!-- Bootstrap core JS-->
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.2.3/dist/js/bootstrap.bundle.min.js"></script>
        <!-- Core theme JS-->
        <script src="{{url_for('static',filename='js/scripts.js')}}"></script>
        <!-- SB Forms JS -->
        <script src="https://cdn.startbootstrap.com/sb-forms-latest.js"></script>
    </body>
</html>
